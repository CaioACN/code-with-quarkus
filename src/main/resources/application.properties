# ===================== Comum =====================
quarkus.http.port=8080
quarkus.http.host=0.0.0.0
quarkus.banner.enabled=false
quarkus.log.console.level=DEBUG

# Desliga DevServices por padrão (evita Testcontainers em qualquer extensão)
quarkus.devservices.enabled=false
quarkus.datasource.devservices.enabled=false

# Hibernate (produção/local/docker): valida schema existente
# (mantemos as duas chaves por compatibilidade)
quarkus.hibernate-orm.database.generation=validate
quarkus.hibernate-orm.sql-load-script=no-file
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.log.format-sql=true

# ===================== Perfil LOCAL (app no host; DB no host/Docker com porta exposta) =====================
%local.quarkus.datasource.db-kind=postgresql
%local.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/quarkus-social
%local.quarkus.datasource.username=postgres
%local.quarkus.datasource.password=postgres

# ===================== Perfil DOCKER (app + db no compose) =====================
# No compose, o host do banco é o nome do serviço: "postgres"
%docker.quarkus.datasource.db-kind=postgresql
%docker.quarkus.datasource.jdbc.url=jdbc:postgresql://postgres:5432/quarkus-social
%docker.quarkus.datasource.username=postgres
%docker.quarkus.datasource.password=postgres

# ===================== Perfil TEST =====================
# Blindagem total: desliga QUALQUER DevServices durante os testes (evita Testcontainers)
%test.quarkus.devservices.enabled=false
%test.quarkus.datasource.devservices.enabled=false

# Usa o Postgres que você sobe no docker-compose (localhost:5432)
%test.quarkus.datasource.db-kind=postgresql
%test.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/quarkus-social
%test.quarkus.datasource.username=postgres
%test.quarkus.datasource.password=postgres

# Banco limpo por execução de testes (ajuste se usar migrações/Flyway)
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.hibernate-orm.sql-load-script=no-file
%test.quarkus.hibernate-orm.log.sql=false
%test.quarkus.hibernate-orm.log.format-sql=false
